(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbc016c2"],{3981:function(t,e,n){},"71a5":function(t,n,o){"use strict";o.r(n);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"文章标题"}},[n("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:"文章简介"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),n("el-form-item",{attrs:{label:"文章类别"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.cid,callback:function(e){t.$set(t.form,"cid",e)},expression:"form.cid"}},t._l(t.options,(function(t){return n("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),n("el-form-item",{attrs:{label:"文章内容"}},[n("mavon-editor",{ref:"md",attrs:{toolbars:t.toolbars},on:{imgAdd:t.handleEditorImgAdd,imgDel:t.handleEditorImgDel},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),n("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},r=[],i=(o("caad"),o("c975"),o("fb6a"),o("b0c0"),o("ac1f"),o("2532"),o("5319"),o("c405")),c=o("caf6"),l={data:function(){return{imgFile:[],options:[],form:{cid:"",title:"",content:"",desc:""},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,fullscreen:!0,readmodel:!0,undo:!0,trash:!0,save:!0,navigation:!0}}},created:function(){this.fetchCategory()},computed:{compiledMarkdown:function(){return marked(this.input,{sanitize:!0})}},methods:{onSubmit:function(){var t=this;Object(c["a"])({title:this.form.title,desc:this.form.desc,cid:this.form.cid,content:this.form.content}).then((function(e){2e4!==e.code?t.$message("添加失败"):t.$router.push("/list/index")}))},fetchCategory:function(){var t=this;Object(i["d"])().then((function(e){t.options=e.data.data,t.total=e.data.total,t.listLoading=!1}))},update:function(){this.input=e.target.value},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},handleEditorImgAdd:function(t,e){var n=this;console.log(t),console.log(e);var o=new FormData;o.append("file",e),this.imgFile[t]=e,Object(c["e"])(o).then((function(o){if(2e4===o.code){n.$message({message:o.msg,type:"success"});var a=o.data,r=e.name;r.includes("-")&&(r=r.replace(/-/g,""));var i=n.form.content;if(i.includes(r)){var c="(".concat(t,")"),l="(".concat(a,")"),s=i.indexOf(c),d=i.replace(c,""),u=function(t,e,n){return t.slice(0,e)+n+t.slice(e)};n.form.content=u(d,s,l)}}else n.$message({message:o.data.msg,type:"error"})}))},handleEditorImgDel:function(t){delete this.imgFile[t]}}},s=l,d=(o("c8b0"),o("2877")),u=Object(d["a"])(s,a,r,!1,null,"45865354",null);n["default"]=u.exports},c405:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c}));var o=n("b775");function a(t){return Object(o["a"])({url:"/admin/category/list",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/admin/category/get",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/admin/category/add",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/admin/category/edit",method:"post",data:t})}},c8b0:function(t,e,n){"use strict";n("3981")},caf6:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return l}));var o=n("b775");function a(t){return Object(o["a"])({url:"/admin/list",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/admin/post/get",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/admin/post/add",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/admin/post/edit",method:"post",data:t})}function l(t){return Object(o["a"])({method:"post",url:"/admin/post/upload",data:t,headers:{"Content-Type":"multipart/form-data"}})}}}]);